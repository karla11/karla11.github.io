---
layout  : wiki
title   : RaspberryPi4_스트림서버설정 
summary : 
date    : 2022-06-20 01:45:52 +0900
updated : 2022-06-20 02:40:15 +0900
tags    : 
toc     : true
public  : true
parent  : 
latex   : false
---
* TOC
{:toc}

# OS설치
* gstreamer 에서 사용하는 인코더 라이브러리 문제로 32비트 설치
```bash
$ wget https://downloads.raspberrypi.org/raspios_armhf/images/raspios_armhf-2022-04-07/2022-04-04-raspios-bullseye-armhf.img.xz
$ xz -d ./2022-04-04-raspios-bullseye-armhf.img.xz
$ sudo dd if=./2022-04-04-raspios-bullseye-armhf.img of=/dev/sdb bs=4M conv=fsync status=progress
```
설치한 MicroSD로 부팅 후 업데이트(인코더 라이브러리가 이때 설치됨 - /opt/vc/)
```bash
$ sudo apt update
$ sudo rpi-update
```

# 영상스트리밍
  * 카메라선정
    * 4K Action캠 -- HDMI -- USB -- Rasp4_B/D -- eth -- 영상송신
  * 스트림서버
    * gst-rtsp-server 
    * v4l2rtspserver
    ```bash
    $ git clone https://github.com/mpromonet/v4l2rtspserver.git
    $ cd v4l2rtspserver
    $ mkdir build && cd build
    $ cmake .. && make
    $ sudo ./rtspserver -F 30 -W 1920 -H 1080 -P 8554 /dev/video0
    ```
  * H.264 
  * H.265 
# 음성통화
# 모니터링
